---
/**
 * WaveTransition - Animated ocean wave transition overlay for slider
 * Uses multiple wave layers with different blue tones for depth effect
 */
---

<div id="wave-transition" class="wave-container">
    <svg
        class="waves"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 1440 320"
        preserveAspectRatio="none"
    >
        <!-- Wave 1 - Darkest (back layer) -->
        <path
            class="wave wave-1"
            fill="#0a2535"
            fill-opacity="0.9"
            d="M0,160 C120,200 240,240 360,220 C480,200 600,120 720,120 C840,120 960,200 1080,220 C1200,240 1320,200 1440,160 L1440,320 L0,320 Z"
        ></path>
        <!-- Wave 2 - Medium (middle layer) -->
        <path
            class="wave wave-2"
            fill="#103646"
            fill-opacity="0.85"
            d="M0,192 C120,230 240,250 360,230 C480,210 600,150 720,150 C840,150 960,210 1080,230 C1200,250 1320,230 1440,192 L1440,320 L0,320 Z"
        ></path>
        <!-- Wave 3 - Lightest (front layer) -->
        <path
            class="wave wave-3"
            fill="#1a5a7a"
            fill-opacity="0.8"
            d="M0,224 C120,256 240,270 360,256 C480,240 600,192 720,192 C840,192 960,240 1080,256 C1200,270 1320,256 1440,224 L1440,320 L0,320 Z"
        ></path>
        <!-- Wave 4 - Foam/highlight -->
        <path
            class="wave wave-4"
            fill="#2a7a9a"
            fill-opacity="0.7"
            d="M0,256 C120,280 240,290 360,280 C480,270 600,240 720,240 C840,240 960,270 1080,280 C1200,290 1320,280 1440,256 L1440,320 L0,320 Z"
        ></path>
    </svg>
</div>

<style is:global>
    .wave-container {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        pointer-events: none;
        z-index: 9999;
        transform: translateY(100%);
        opacity: 0;
        transition: opacity 0.1s ease;
    }

    .wave-container.active {
        opacity: 1;
        animation: waveTransition 1.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    }

    .waves {
        width: 100%;
        height: 100%;
        display: block;
    }

    /* Base wave animation */
    .wave {
        transform-origin: center bottom;
    }

    /* Individual wave oscillation when active */
    .wave-container.active .wave-1 {
        animation: waveOscillate1 1.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .wave-container.active .wave-2 {
        animation: waveOscillate2 1.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .wave-container.active .wave-3 {
        animation: waveOscillate3 1.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .wave-container.active .wave-4 {
        animation: waveOscillate4 1.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Main container animation - rise up, pause, go down */
    @keyframes waveTransition {
        0% {
            transform: translateY(100%);
        }
        35% {
            transform: translateY(0%);
        }
        65% {
            transform: translateY(0%);
        }
        100% {
            transform: translateY(100%);
        }
    }

    /* Wave oscillation animations with slight delays for natural effect */
    @keyframes waveOscillate1 {
        0%,
        100% {
            d: path(
                "M0,160 C120,200 240,240 360,220 C480,200 600,120 720,120 C840,120 960,200 1080,220 C1200,240 1320,200 1440,160 L1440,320 L0,320 Z"
            );
        }
        25% {
            d: path(
                "M0,180 C120,140 240,200 360,240 C480,220 600,140 720,100 C840,140 960,220 1080,240 C1200,200 1320,160 1440,180 L1440,320 L0,320 Z"
            );
        }
        50% {
            d: path(
                "M0,140 C120,180 240,220 360,200 C480,180 600,100 720,140 C840,100 960,180 1080,200 C1200,220 1320,180 1440,140 L1440,320 L0,320 Z"
            );
        }
        75% {
            d: path(
                "M0,200 C120,160 240,180 360,240 C480,200 600,160 720,120 C840,160 960,200 1080,260 C1200,200 1320,160 1440,200 L1440,320 L0,320 Z"
            );
        }
    }

    @keyframes waveOscillate2 {
        0%,
        100% {
            d: path(
                "M0,192 C120,230 240,250 360,230 C480,210 600,150 720,150 C840,150 960,210 1080,230 C1200,250 1320,230 1440,192 L1440,320 L0,320 Z"
            );
        }
        20% {
            d: path(
                "M0,210 C120,180 240,220 360,250 C480,230 600,170 720,130 C840,170 960,230 1080,250 C1200,220 1320,180 1440,210 L1440,320 L0,320 Z"
            );
        }
        50% {
            d: path(
                "M0,170 C120,210 240,230 360,210 C480,190 600,130 720,170 C840,130 960,190 1080,210 C1200,230 1320,210 1440,170 L1440,320 L0,320 Z"
            );
        }
        80% {
            d: path(
                "M0,220 C120,190 240,210 360,260 C480,220 600,180 720,140 C840,180 960,220 1080,270 C1200,220 1320,180 1440,220 L1440,320 L0,320 Z"
            );
        }
    }

    @keyframes waveOscillate3 {
        0%,
        100% {
            d: path(
                "M0,224 C120,256 240,270 360,256 C480,240 600,192 720,192 C840,192 960,240 1080,256 C1200,270 1320,256 1440,224 L1440,320 L0,320 Z"
            );
        }
        30% {
            d: path(
                "M0,240 C120,220 240,250 360,280 C480,260 600,210 720,170 C840,210 960,260 1080,280 C1200,250 1320,220 1440,240 L1440,320 L0,320 Z"
            );
        }
        60% {
            d: path(
                "M0,200 C120,240 240,260 360,240 C480,220 600,170 720,210 C840,170 960,220 1080,240 C1200,260 1320,240 1440,200 L1440,320 L0,320 Z"
            );
        }
    }

    @keyframes waveOscillate4 {
        0%,
        100% {
            d: path(
                "M0,256 C120,280 240,290 360,280 C480,270 600,240 720,240 C840,240 960,270 1080,280 C1200,290 1320,280 1440,256 L1440,320 L0,320 Z"
            );
        }
        25% {
            d: path(
                "M0,270 C120,250 240,280 360,300 C480,290 600,250 720,220 C840,250 960,290 1080,300 C1200,280 1320,250 1440,270 L1440,320 L0,320 Z"
            );
        }
        55% {
            d: path(
                "M0,240 C120,270 240,285 360,270 C480,260 600,230 720,260 C840,230 960,260 1080,270 C1200,285 1320,270 1440,240 L1440,320 L0,320 Z"
            );
        }
    }

    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
        .wave-container.active {
            animation: simpleFade 0.8s ease forwards;
        }
        .wave-container.active .wave {
            animation: none !important;
        }
        @keyframes simpleFade {
            0% {
                opacity: 0;
                transform: translateY(100%);
            }
            30% {
                opacity: 1;
                transform: translateY(0%);
            }
            70% {
                opacity: 1;
                transform: translateY(0%);
            }
            100% {
                opacity: 0;
                transform: translateY(100%);
            }
        }
    }
</style>
