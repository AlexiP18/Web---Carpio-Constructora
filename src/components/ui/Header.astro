---
import { Icon } from 'astro-icon/components';
import Button from './Button.astro';
// Logo de Constructora Carpio
import logoCarpio from '../../assets/LogoCarpioConstructora.svg';
---

<header class="fixed top-0 left-0 right-0 bg-[#103646]/95 backdrop-blur-md w-full z-50 border-b border-[#103646] shadow-sm transition-all duration-300" id="header">
  <nav class="w-full">
    <!-- Mobile Header -->
    <div class="lg:hidden flex h-14 sm:h-16 items-center justify-between px-3 sm:px-4 py-0 box-border transition-all duration-300">
      <!-- Logo -->
      <a href="/" class="flex items-center justify-start logo-link transition-all duration-300">
        <div class="h-9 sm:h-11 w-[100px] sm:w-[120px] overflow-clip relative">
          <img src={logoCarpio.src} alt="Constructora Carpio" class="block max-w-none size-full transition-all duration-300" />
        </div>
      </a>
      
      <!-- Mobile Actions Container -->
      <div class="flex items-center gap-2 sm:gap-3">
        <!-- Quick Call Button -->
        <Button 
          variant="outline" 
          size="sm"
          href="tel:0956324598"
          icon="ph:phone"
          iconPosition="left"
          class="!w-10 !h-10 !p-0 hidden xs:flex border-white/30 text-white hover:bg-white/10 hover:border-white"
        >
        </Button>
        
        <!-- WhatsApp Quick Button -->
        <Button 
          variant="success" 
          size="sm"
          href="https://wa.me/50688887777"
          target="_blank"
          icon="ph:whatsapp-logo"
          iconPosition="left"
          class="!w-10 !h-10 !p-0 hidden sm:flex bg-[#25D366] hover:bg-[#25D366]/90 border-[#25D366]"
        >
        </Button>
        
        <!-- Mobile Menu Button -->
        <button 
          class="flex gap-2.5 items-center justify-center relative w-10 h-10 sm:w-12 sm:h-12 hover:bg-white/10 rounded-lg transition-all duration-200 border border-white/30 hover:border-white backdrop-blur-sm"
          id="mobile-menu-toggle"
          aria-label="Abrir menú de navegación"
        >
          <Icon name="ph:list" class="w-5 h-5 sm:w-6 sm:h-6 text-white" />
        </button>
      </div>
    </div>

    <!-- Desktop Header -->
    <div class="hidden lg:flex h-[72px] items-center justify-center px-8 py-0 box-border transition-all duration-300">
      <div class="flex items-center justify-between relative w-full max-w-container-large">
        <!-- Logo -->
        <a href="/" class="flex h-10 items-center justify-start relative w-40 logo-link transition-all duration-300">
          <div class="h-12 overflow-clip relative w-[140px]">
            <img src={logoCarpio.src} alt="Constructora Carpio" class="block max-w-none size-full transition-all duration-300" />
          </div>
        </a>
        
        <!-- Desktop Navigation - Right Aligned -->
        <div class="flex items-center gap-4">
          <nav class="flex gap-8 items-center justify-center relative">
            <a href="/" class="font-montserrat font-medium text-text-regular text-white hover:text-[#D79528] transition-colors duration-200 relative group">
              Inicio
              <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#D79528] transition-all duration-300 group-hover:w-full"></span>
            </a>
            <a href="/quienes-somos" class="font-montserrat font-medium text-text-regular text-white hover:text-[#D79528] transition-colors duration-200 relative group">
              Nosotros
              <span class="absolute bottom-0 left-0 w-0 h-0.5 bg-[#D79528] transition-all duration-300 group-hover:w-full"></span>
            </a>
              
              <!-- Services Dropdown -->
              <div class="relative group">
                <a href="/servicios" class="flex gap-1 items-center justify-start relative hover:text-[#D79528] transition-colors duration-200">
                  <span class="font-montserrat font-medium text-text-regular text-white group-hover:text-[#D79528] transition-colors duration-200">
                    Servicios
                  </span>
                  <Icon name="ph:caret-down" class="w-4 h-4 transition-transform duration-300 group-hover:rotate-180 text-white" />
                </a>
                <!-- Dropdown Menu -->
                <div class="absolute top-full left-0 mt-2 w-72 bg-white backdrop-blur-xl rounded-2xl shadow-2xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transform translate-y-2 group-hover:translate-y-0 transition-all duration-300 z-50 overflow-hidden">
                  <div class="py-2">
                    <a href="/servicios/construccion" class="block px-5 py-4 font-heebo text-neutral-darkest hover:bg-gradient-to-r hover:from-[#103646]/5 hover:to-transparent transition-all duration-200 border-l-4 border-transparent hover:border-[#103646] group/item">
                      <div class="flex items-center gap-4">
                        <div class="w-11 h-11 bg-gradient-to-br from-[#103646]/10 to-[#103646]/5 rounded-xl flex items-center justify-center group-hover/item:scale-110 group-hover/item:bg-[#103646] transition-all duration-300">
                          <Icon name="ph:hammer-fill" class="w-6 h-6 text-[#103646] group-hover/item:text-white transition-colors duration-300" />
                        </div>
                        <div class="flex-1">
                          <span class="font-bold text-base block group-hover/item:text-[#103646] transition-colors duration-200">Construcción</span>
                          <p class="text-xs text-gray-500 mt-1 group-hover/item:text-gray-600">Proyectos desde cero con calidad</p>
                        </div>
                        <Icon name="ph:arrow-right" class="w-5 h-5 text-gray-400 opacity-0 group-hover/item:opacity-100 group-hover/item:translate-x-1 transition-all duration-200" />
                      </div>
                    </a>
                    
                    <a href="/servicios/remodelacion" class="block px-5 py-4 font-heebo text-neutral-darkest hover:bg-gradient-to-r hover:from-[#D79528]/5 hover:to-transparent transition-all duration-200 border-l-4 border-transparent hover:border-[#D79528] group/item">
                      <div class="flex items-center gap-4">
                        <div class="w-11 h-11 bg-gradient-to-br from-[#D79528]/10 to-[#D79528]/5 rounded-xl flex items-center justify-center group-hover/item:scale-110 group-hover/item:bg-[#D79528] transition-all duration-300">
                          <Icon name="ph:paint-roller-fill" class="w-6 h-6 text-[#D79528] group-hover/item:text-white transition-colors duration-300" />
                        </div>
                        <div class="flex-1">
                          <span class="font-bold text-base block group-hover/item:text-[#D79528] transition-colors duration-200">Remodelación</span>
                          <p class="text-xs text-gray-500 mt-1 group-hover/item:text-gray-600">Renovación de espacios existentes</p>
                        </div>
                        <Icon name="ph:arrow-right" class="w-5 h-5 text-gray-400 opacity-0 group-hover/item:opacity-100 group-hover/item:translate-x-1 transition-all duration-200" />
                      </div>
                    </a>
                    
                    <a href="/servicios/diseño-arquitectonico" class="block px-5 py-4 font-heebo text-neutral-darkest hover:bg-gradient-to-r hover:from-[#103646]/5 hover:to-transparent transition-all duration-200 border-l-4 border-transparent hover:border-[#103646] group/item">
                      <div class="flex items-center gap-4">
                        <div class="w-11 h-11 bg-gradient-to-br from-[#103646]/10 to-[#103646]/5 rounded-xl flex items-center justify-center group-hover/item:scale-110 group-hover/item:bg-[#103646] transition-all duration-300">
                          <Icon name="ph:blueprint-fill" class="w-6 h-6 text-[#103646] group-hover/item:text-white transition-colors duration-300" />
                        </div>
                        <div class="flex-1">
                          <span class="font-bold text-base block group-hover/item:text-[#103646] transition-colors duration-200">Diseño Arquitectónico</span>
                          <p class="text-xs text-gray-500 mt-1 group-hover/item:text-gray-600">Planificación profesional y creativa</p>
                        </div>
                        <Icon name="ph:arrow-right" class="w-5 h-5 text-gray-400 opacity-0 group-hover/item:opacity-100 group-hover/item:translate-x-1 transition-all duration-200" />
                      </div>
                    </a>
                    
                    <div class="border-t border-gray-100 mt-2 pt-2 px-2">
                      <a href="/servicios" class="block px-4 py-3.5 font-heebo text-gray-700 hover:bg-gradient-to-r hover:from-[#D79528]/10 hover:to-transparent transition-all duration-200 rounded-xl group/all">
                        <div class="flex items-center justify-center gap-2.5">
                          <Icon name="ph:stack-fill" class="w-5 h-5 text-[#D79528] group-hover/all:scale-110 transition-transform duration-200" />
                          <span class="font-bold text-sm group-hover/all:text-[#D79528] transition-colors duration-200">Ver todos los servicios</span>
                          <Icon name="ph:arrow-right" class="w-4 h-4 text-[#D79528] group-hover/all:translate-x-1 transition-transform duration-200" />
                        </div>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            
            <!-- Projects Dropdown -->
            <div class="relative group">
              <a href="/proyectos" class="flex gap-1 items-center justify-start relative hover:text-[#D79528] transition-colors duration-200">
                <span class="font-montserrat font-medium text-text-regular text-white group-hover:text-[#D79528] transition-colors duration-200">
                  Proyectos
                </span>
                <Icon name="ph:caret-down" class="w-4 h-4 transition-transform duration-300 group-hover:rotate-180 text-white" />
              </a>
              <!-- Dropdown Menu -->
              <div class="absolute top-full left-0 mt-2 w-72 bg-white backdrop-blur-xl rounded-2xl shadow-2xl border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transform translate-y-2 group-hover:translate-y-0 transition-all duration-300 z-50 overflow-hidden">
                <div class="py-2">
                  <a href="/proyecto/proyecto-residencial-moderno" class="block px-5 py-4 font-heebo text-neutral-darkest hover:bg-gradient-to-r hover:from-[#103646]/5 hover:to-transparent transition-all duration-200 border-l-4 border-transparent hover:border-[#103646] group/item">
                    <div class="flex items-center gap-4">
                      <div class="w-11 h-11 bg-gradient-to-br from-[#103646]/10 to-[#103646]/5 rounded-xl flex items-center justify-center group-hover/item:scale-110 group-hover/item:bg-[#103646] transition-all duration-300">
                        <Icon name="ph:house-fill" class="w-6 h-6 text-[#103646] group-hover/item:text-white transition-colors duration-300" />
                      </div>
                      <div class="flex-1">
                        <span class="font-bold text-base block group-hover/item:text-[#103646] transition-colors duration-200">Residencial Moderna Vista</span>
                        <p class="text-xs text-gray-500 mt-1 group-hover/item:text-gray-600">Complejo habitacional moderno</p>
                      </div>
                      <Icon name="ph:arrow-right" class="w-5 h-5 text-gray-400 opacity-0 group-hover/item:opacity-100 group-hover/item:translate-x-1 transition-all duration-200" />
                    </div>
                  </a>
                  
                  <a href="/proyecto/centro-comercial-innovador" class="block px-5 py-4 font-heebo text-neutral-darkest hover:bg-gradient-to-r hover:from-[#D79528]/5 hover:to-transparent transition-all duration-200 border-l-4 border-transparent hover:border-[#D79528] group/item">
                    <div class="flex items-center gap-4">
                      <div class="w-11 h-11 bg-gradient-to-br from-[#D79528]/10 to-[#D79528]/5 rounded-xl flex items-center justify-center group-hover/item:scale-110 group-hover/item:bg-[#D79528] transition-all duration-300">
                        <Icon name="ph:storefront-fill" class="w-6 h-6 text-[#D79528] group-hover/item:text-white transition-colors duration-300" />
                      </div>
                      <div class="flex-1">
                        <span class="font-bold text-base block group-hover/item:text-[#D79528] transition-colors duration-200">Centro Comercial Plaza</span>
                        <p class="text-xs text-gray-500 mt-1 group-hover/item:text-gray-600">Espacio comercial innovador</p>
                      </div>
                      <Icon name="ph:arrow-right" class="w-5 h-5 text-gray-400 opacity-0 group-hover/item:opacity-100 group-hover/item:translate-x-1 transition-all duration-200" />
                    </div>
                  </a>
                  
                  <a href="/proyecto/parque-recreativo-familiar" class="block px-5 py-4 font-heebo text-neutral-darkest hover:bg-gradient-to-r hover:from-[#103646]/5 hover:to-transparent transition-all duration-200 border-l-4 border-transparent hover:border-[#103646] group/item">
                    <div class="flex items-center gap-4">
                      <div class="w-11 h-11 bg-gradient-to-br from-[#103646]/10 to-[#103646]/5 rounded-xl flex items-center justify-center group-hover/item:scale-110 group-hover/item:bg-[#103646] transition-all duration-300">
                        <Icon name="ph:tree-fill" class="w-6 h-6 text-[#103646] group-hover/item:text-white transition-colors duration-300" />
                      </div>
                      <div class="flex-1">
                        <span class="font-bold text-base block group-hover/item:text-[#103646] transition-colors duration-200">Parque Recreativo Familiar</span>
                        <p class="text-xs text-gray-500 mt-1 group-hover/item:text-gray-600">Área de esparcimiento comunitario</p>
                      </div>
                      <Icon name="ph:arrow-right" class="w-5 h-5 text-gray-400 opacity-0 group-hover/item:opacity-100 group-hover/item:translate-x-1 transition-all duration-200" />
                    </div>
                  </a>
                  
                  <div class="border-t border-gray-100 mt-2 pt-2 px-2">
                    <a href="/proyectos" class="block px-4 py-3.5 font-heebo text-gray-700 hover:bg-gradient-to-r hover:from-[#D79528]/10 hover:to-transparent transition-all duration-200 rounded-xl group/all">
                      <div class="flex items-center justify-center gap-2.5">
                        <Icon name="ph:folder-open-fill" class="w-5 h-5 text-[#D79528] group-hover/all:scale-110 transition-transform duration-200" />
                        <span class="font-bold text-sm group-hover/all:text-[#D79528] transition-colors duration-200">Ver todos los proyectos</span>
                        <Icon name="ph:arrow-right" class="w-4 h-4 text-[#D79528] group-hover/all:translate-x-1 transition-transform duration-200" />
                      </div>
                    </a>
                  </div>
                </div>
              </div>
            </nav>
          </div>
          
          <!-- Action Buttons -->
          <div class="flex gap-3 items-center">
            <!-- Phone Button -->
            <Button 
              variant="outline" 
              size="sm"
              href="tel:0956324598"
              icon="ph:phone"
              iconPosition="left"
              class="min-w-[140px] h-10 px-4 font-montserrat font-medium text-text-regular border-white/40 text-white hover:bg-white hover:text-[#103646] backdrop-blur-sm transition-all duration-300 hover:scale-105"
            >
              0956324598
            </Button>
            
            <!-- Contact Button -->
            <Button 
              variant="primary" 
              size="sm"
              href="/contacto"
              icon="ph:envelope-simple"
              iconPosition="left"
              class="min-w-[140px] h-10 px-4 font-montserrat font-medium text-text-regular bg-[#D79528] hover:bg-[#D79528]/90 border-[#D79528] text-white transition-all duration-300 hover:scale-105 shadow-lg hover:shadow-xl"
            >
              Contacto
            </Button>
          </div>
        </div>
      </div>
    </div>

    <!-- Mobile Menu Overlay (Hidden by default) -->
    <div 
      id="mobile-menu" 
      class="lg:hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-[9999] opacity-0 invisible transition-all duration-300 ease-in-out"
      style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; width: 100vw; height: 100vh;"
    >
      <!-- Mobile Menu Panel -->
      <div 
        class="fixed left-0 top-0 h-full w-[320px] max-w-[85vw] bg-white backdrop-blur-lg transform -translate-x-full transition-transform duration-300 ease-in-out shadow-2xl border-r border-gray-100"
        style="position: fixed; top: 0; left: 0; height: 100vh; z-index: 10000;"
      >
        <div class="flex flex-col h-full" style="height: 100vh;">
          <!-- Mobile Menu Header -->
          <div class="flex h-16 items-center justify-between px-6 py-0 border-b border-gray-100 bg-gradient-to-r from-[#103646]/5 to-transparent flex-shrink-0">
            <a href="/" class="flex items-center gap-3 logo-link transition-all duration-300">
              <img src={logoCarpio.src} alt="Constructora Carpio" class="h-11 flex-shrink-0 transition-all duration-300" />
            </a>
            <button 
              id="mobile-menu-close"
              class="flex items-center justify-center w-10 h-10 flex-shrink-0 hover:bg-red-50 rounded-lg transition-colors duration-200 group border border-gray-200"
              aria-label="Cerrar menú"
            >
              <Icon name="ph:x" class="w-5 h-5 text-neutral-darkest group-hover:text-red-600 transition-colors duration-200" />
            </button>
          </div>
        
          <!-- Mobile Menu Content -->
          <div class="flex-1 flex flex-col overflow-hidden" style="flex: 1; min-height: 0;">
            <!-- Navigation Links -->
            <div class="flex-1 overflow-y-auto py-6 px-6" style="flex: 1; overflow-y: auto;">
              <nav class="space-y-3">
                <a 
                  href="/" 
                  class="mobile-nav-link group active"
                >
                  <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-[#103646]/10 rounded-xl flex items-center justify-center group-hover:bg-[#103646] group-hover:scale-110 transition-all duration-200">
                      <Icon name="ph:house" class="w-5 h-5 text-[#103646] group-hover:text-white transition-colors duration-200" />
                    </div>
                    <span class="font-medium">Inicio</span>
                  </div>
                  <Icon name="ph:caret-right" class="w-5 h-5 text-gray-400 group-hover:text-[#103646] group-hover:translate-x-1 transition-all duration-200" />
                </a>
                
                <a 
                  href="/quienes-somos" 
                  class="mobile-nav-link group"
                >
                  <div class="flex items-center gap-3">
                    <div class="w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center group-hover:bg-gray-300 group-hover:scale-110 transition-all duration-200">
                      <Icon name="ph:users" class="w-5 h-5 text-gray-600 group-hover:text-gray-800 transition-colors duration-200" />
                    </div>
                    <span class="font-medium">Quiénes Somos</span>
                  </div>
                  <Icon name="ph:caret-right" class="w-5 h-5 text-gray-400 group-hover:text-gray-600 group-hover:translate-x-1 transition-all duration-200" />
                </a>
                
                <!-- Services Section -->
                <div class="py-4">
                  <a href="/servicios" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gradient-to-r hover:from-[#103646]/5 hover:to-transparent transition-all duration-200 group mb-4 border-l-4 border-transparent hover:border-[#103646]">
                    <div class="w-10 h-10 bg-gradient-to-br from-[#103646]/10 to-[#103646]/5 rounded-xl flex items-center justify-center group-hover:bg-[#103646] group-hover:scale-110 transition-all duration-200">
                      <Icon name="ph:stack-fill" class="w-5 h-5 text-[#103646] group-hover:text-white transition-colors duration-200" />
                    </div>
                    <div class="flex-1">
                      <span class="font-bold text-gray-900 group-hover:text-[#103646] transition-colors duration-200">Servicios</span>
                      <p class="text-xs text-gray-500 mt-0.5">Nuestras soluciones</p>
                    </div>
                    <Icon name="ph:arrow-right" class="w-5 h-5 text-gray-400 group-hover:text-[#103646] group-hover:translate-x-1 transition-all duration-200" />
                  </a>
                  <div class="space-y-2 pl-4">
                    <a href="/servicios/construccion" class="mobile-nav-link group sub-item border-l-4 border-transparent hover:border-[#103646]">
                      <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-[#103646]/5 rounded-lg flex items-center justify-center group-hover:bg-[#103646]/10 transition-all duration-200">
                          <Icon name="ph:hammer-fill" class="w-4 h-4 text-[#103646]" />
                        </div>
                        <div class="flex-1">
                          <span class="font-medium text-sm">Construcción</span>
                          <p class="text-xs text-gray-500">Proyectos desde cero</p>
                        </div>
                      </div>
                    </a>
                    <a href="/servicios/remodelacion" class="mobile-nav-link group sub-item border-l-4 border-transparent hover:border-[#D79528]">
                      <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-[#D79528]/5 rounded-lg flex items-center justify-center group-hover:bg-[#D79528]/10 transition-all duration-200">
                          <Icon name="ph:paint-roller-fill" class="w-4 h-4 text-[#D79528]" />
                        </div>
                        <div class="flex-1">
                          <span class="font-medium text-sm">Remodelación</span>
                          <p class="text-xs text-gray-500">Renovación de espacios</p>
                        </div>
                      </div>
                    </a>
                    <a href="/servicios/diseño-arquitectonico" class="mobile-nav-link group sub-item border-l-4 border-transparent hover:border-[#103646]">
                      <div class="flex items-center gap-3">
                        <div class="w-8 h-8 bg-[#103646]/5 rounded-lg flex items-center justify-center group-hover:bg-[#103646]/10 transition-all duration-200">
                          <Icon name="ph:blueprint-fill" class="w-4 h-4 text-[#103646]" />
                        </div>
                        <div class="flex-1">
                          <span class="font-medium text-sm">Diseño Arquitectónico</span>
                          <p class="text-xs text-gray-500">Planificación profesional</p>
                        </div>
                      </div>
                    </a>
                  </div>
                </div>
                
                <!-- Projects Section -->
                <div class="py-4">
                  <a href="/proyectos" class="flex items-center gap-3 px-4 py-3 rounded-xl hover:bg-gray-50 transition-all duration-200 group mb-4">
                    <div class="w-10 h-10 bg-gray-100 rounded-xl flex items-center justify-center group-hover:bg-gray-300 group-hover:scale-110 transition-all duration-200">
                      <Icon name="ph:folder-open" class="w-5 h-5 text-gray-600 group-hover:text-gray-800 transition-colors duration-200" />
                    </div>
                    <div class="flex-1">
                      <span class="font-bold text-gray-900 group-hover:text-gray-700 transition-colors duration-200">Proyectos</span>
                      <p class="text-xs text-gray-500 mt-0.5">Explora nuestros trabajos</p>
                    </div>
                    <Icon name="ph:caret-right" class="w-5 h-5 text-gray-400 group-hover:text-gray-600 group-hover:translate-x-1 transition-all duration-200" />
                  </a>
                  <div class="space-y-2 pl-4">
                    <a href="/proyecto/proyecto-residencial-moderno" class="mobile-nav-link group sub-item">
                      <div class="flex items-center gap-3">
                        <Icon name="ph:house" class="w-4 h-4 text-gray-500" />
                        <span>Residencial Moderna Vista</span>
                      </div>
                    </a>
                    <a href="/proyecto/centro-comercial-innovador" class="mobile-nav-link group sub-item">
                      <div class="flex items-center gap-3">
                        <Icon name="ph:storefront" class="w-4 h-4 text-gray-500" />
                        <span>Centro Comercial Plaza</span>
                      </div>
                    </a>
                    <a href="/proyecto/parque-recreativo-familiar" class="mobile-nav-link group sub-item">
                      <div class="flex items-center gap-3">
                        <Icon name="ph:tree" class="w-4 h-4 text-gray-500" />
                        <span>Parque Recreativo</span>
                      </div>
                    </a>
                  </div>
                </div>
              </nav>
            </div>
            
            <!-- Mobile Contact Section -->
            <div class="p-6 border-t border-gray-100 bg-gradient-to-t from-gray-50/50 to-transparent space-y-4 flex-shrink-0">
              <!-- Primary CTA -->
              <a 
                href="/contacto" 
                class="bg-[#103646] text-white px-6 py-4 rounded-xl font-heebo font-bold text-base w-full hover:bg-[#103646]/90 transform hover:scale-[1.02] transition-all duration-300 shadow-lg flex items-center justify-center gap-3"
              >
                <Icon name="ph:envelope-simple" class="w-5 h-5" />
                Solicitar Cotización
              </a>
              
              <!-- Quick Actions Grid -->
              <div class="grid grid-cols-2 gap-3">
                <a 
                  href="tel:0956324598" 
                  class="bg-white border border-gray-200 text-neutral-darkest px-4 py-3 rounded-xl font-heebo font-medium text-sm hover:bg-gray-50 hover:border-[#103646] transition-all duration-300 flex items-center justify-center gap-2"
                >
                  <Icon name="ph:phone" class="w-4 h-4" />
                  <span>Llamar</span>
                </a>
                <a 
                  href="https://wa.me/50688887777" 
                  target="_blank"
                  class="bg-green-500 text-white px-4 py-3 rounded-xl font-heebo font-medium text-sm hover:bg-green-600 transition-all duration-300 flex items-center justify-center gap-2"
                >
                  <Icon name="ph:whatsapp-logo" class="w-4 h-4" />
                  <span>WhatsApp</span>
                </a>
              </div>
              
              <!-- Contact Info -->
              <div class="pt-3 space-y-3 text-sm text-gray-600">
                <div class="flex items-center gap-3">
                  <Icon name="ph:clock" class="w-4 h-4 text-[#103646]" />
                  <span>Lun-Vie: 8AM-6PM | Sáb: 8AM-2PM</span>
                </div>
                <div class="flex items-center gap-3">
                  <Icon name="ph:map-pin" class="w-4 h-4 text-[#103646]" />
                  <span>San José, Costa Rica</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>

<script>
  // Header scroll behavior
  const header = document.getElementById('header');
  let lastScrollY = window.scrollY;
  let isScrollingUp = false;

  function updateHeaderOnScroll() {
    const currentScrollY = window.scrollY;
    isScrollingUp = currentScrollY < lastScrollY;

    if (currentScrollY > 50) {
      header?.classList.add('header-scrolled');
      if (isScrollingUp || currentScrollY < 100) {
        header?.classList.remove('header-hidden');
      } else if (currentScrollY > lastScrollY + 10) {
        header?.classList.add('header-hidden');
      }
    } else {
      header?.classList.remove('header-scrolled', 'header-hidden');
    }

    lastScrollY = currentScrollY;
  }

  // Throttled scroll event listener
  let scrollTimer: number | null = null;
  window.addEventListener('scroll', () => {
    if (scrollTimer) return;
    scrollTimer = requestAnimationFrame(() => {
      updateHeaderOnScroll();
      scrollTimer = null;
    });
  });

  // Mobile menu functionality
  const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
  const mobileMenu = document.getElementById('mobile-menu');
  const mobileMenuClose = document.getElementById('mobile-menu-close');
  const mobileMenuPanel = mobileMenu?.querySelector('.fixed') as HTMLElement;

  function openMobileMenu() {
    document.body.classList.add('mobile-menu-open');
    mobileMenu?.classList.remove('opacity-0', 'invisible');
    setTimeout(() => {
      mobileMenuPanel?.classList.remove('-translate-x-full');
    }, 10);
  }

  function closeMobileMenu() {
    document.body.classList.remove('mobile-menu-open');
    mobileMenuPanel?.classList.add('-translate-x-full');
    setTimeout(() => {
      mobileMenu?.classList.add('opacity-0', 'invisible');
    }, 300);
  }

  mobileMenuToggle?.addEventListener('click', openMobileMenu);
  mobileMenuClose?.addEventListener('click', closeMobileMenu);

  // Close menu when clicking on overlay
  mobileMenu?.addEventListener('click', (e) => {
    if (e.target === mobileMenu) {
      closeMobileMenu();
    }
  });

  // Close mobile menu when clicking on links
  const mobileMenuLinks = mobileMenu?.querySelectorAll('a');
  mobileMenuLinks?.forEach(link => {
    link.addEventListener('click', closeMobileMenu);
  });

  // Close mobile menu on escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && !mobileMenu?.classList.contains('invisible')) {
      closeMobileMenu();
    }
  });
</script>

<style>
  /* Header scroll styles */
  #header {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  #header.header-scrolled {
    @apply bg-[#103646]/90 backdrop-blur-lg shadow-lg border-b border-[#103646]/80;
  }

  #header.header-hidden {
    transform: translateY(-100%);
  }

  /* Smooth dropdown animations */
  .group:hover .group-hover\:opacity-100 {
    animation: fadeInDown 0.3s ease-out forwards;
  }

  @keyframes fadeInDown {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Mobile menu backdrop */
  #mobile-menu {
    backdrop-filter: blur(8px);
  }

  /* Mobile navigation links */
  .mobile-nav-link {
    @apply flex items-center justify-between w-full px-4 py-4 rounded-xl font-heebo font-medium text-base text-neutral-darkest hover:bg-[#103646]/5 hover:text-[#103646] transition-all duration-200;
  }

  .mobile-nav-link.sub-item {
    @apply pl-4 py-3 text-sm font-normal rounded-lg;
  }

  .mobile-nav-link.active {
    @apply bg-[#103646]/10 text-[#103646];
  }

  /* Mobile menu specific styles */
  #mobile-menu {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    z-index: 9999 !important;
  }

  #mobile-menu .fixed {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    height: 100vh !important;
    width: 320px !important;
    max-width: 85vw !important;
    z-index: 10000 !important;
  }

  /* Responsive breakpoints */
  @media (min-width: 475px) {
    /* Extra small devices (phones, 475px and up) */
  }

  /* Ensure body padding for fixed header */
  body {
    padding-top: 72px;
  }

  @media (max-width: 1023px) {
    body {
      padding-top: 56px; /* Reduced for mobile */
    }
  }

  @media (max-width: 639px) {
    body {
      padding-top: 56px; /* Even smaller for small mobile */
    }
  }

  /* Mobile menu panel improvements */
  @media (max-width: 374px) {
    #mobile-menu .fixed {
      width: 90%;
    }
  }

  /* Touch improvements */
  @media (hover: none) and (pointer: coarse) {
    .mobile-nav-link:hover {
      @apply bg-[#103646]/5;
    }
    
    .mobile-nav-link:active {
      @apply bg-[#103646]/15 scale-95;
    }
  }

  /* Prevent body scroll when mobile menu is open */
  body.mobile-menu-open {
    overflow: hidden;
    position: fixed;
    width: 100%;
  }

  /* Logo hover effect - Change to secondary color */
  .logo-link:hover img {
    filter: brightness(0) saturate(100%) invert(63%) sepia(89%) saturate(503%) hue-rotate(359deg) brightness(91%) contrast(91%);
    transform: scale(1.05);
  }
</style>