---
/**
 * HeroBlock.astro
 * Bloque Hero configurable para páginas dinámicas
 */
import CloudinaryImage from '@/components/ui/CloudinaryImage.astro';

interface Props {
  title: string;
  subtitle?: string;
  backgroundImage?: string;
  backgroundVideo?: string;
  ctaText?: string;
  ctaLink?: string;
  secondaryCtaText?: string;
  secondaryCtaLink?: string;
  alignment?: 'left' | 'center' | 'right';
  overlay?: boolean;
}

const {
  title,
  subtitle,
  backgroundImage,
  backgroundVideo,
  ctaText,
  ctaLink,
  secondaryCtaText,
  secondaryCtaLink,
  alignment = 'center',
  overlay = true,
} = Astro.props;

const alignmentClasses = {
  left: 'text-left items-start',
  center: 'text-center items-center',
  right: 'text-right items-end',
};
---

<section class="relative min-h-[70vh] flex items-center justify-center overflow-hidden">
  {/* Background Image or Video */}
  {backgroundVideo ? (
    <video
      autoplay
      muted
      loop
      playsinline
      class="absolute inset-0 w-full h-full object-cover"
    >
      <source src={backgroundVideo.replace('/upload/', '/upload/f_mp4,vc_h264/')} type="video/mp4" />
    </video>
  ) : backgroundImage ? (
    <CloudinaryImage
      src={backgroundImage}
      alt={title}
      width={1920}
      height={1080}
      class="absolute inset-0 w-full h-full object-cover"
      loading="eager"
    />
  ) : (
    <div class="absolute inset-0 bg-gradient-to-br from-primary-600 to-primary-800" />
  )}
  
  {/* Overlay */}
  {overlay && (
    <div class="absolute inset-0 bg-black/50" />
  )}
  
  {/* Content */}
  <div class={`relative z-10 max-w-4xl mx-auto px-4 py-20 flex flex-col ${alignmentClasses[alignment]}`}>
    <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight">
      {title}
    </h1>
    
    {subtitle && (
      <p class="text-lg md:text-xl text-white/90 mb-8 max-w-2xl">
        {subtitle}
      </p>
    )}
    
    {(ctaText || secondaryCtaText) && (
      <div class="flex flex-wrap gap-4">
        {ctaText && ctaLink && (
          <a
            href={ctaLink}
            class="inline-flex items-center px-6 py-3 bg-primary-500 hover:bg-primary-600 text-white font-semibold rounded-lg transition-colors"
          >
            {ctaText}
          </a>
        )}
        
        {secondaryCtaText && secondaryCtaLink && (
          <a
            href={secondaryCtaLink}
            class="inline-flex items-center px-6 py-3 border-2 border-white text-white hover:bg-white hover:text-gray-900 font-semibold rounded-lg transition-colors"
          >
            {secondaryCtaText}
          </a>
        )}
      </div>
    )}
  </div>
</section>
