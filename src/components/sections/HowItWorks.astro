---
import { Icon } from 'astro-icon/components';

// Asset constants from Figma
const processImage = "http://localhost:3845/assets/b7b4e314cc3eb923b7fa8aac8183d1866fe76120.png";
---

<section class="bg-neutral-lightest px-5 py-16 lg:px-16 lg:py-28">
  <div class="max-w-container-large mx-auto">
    <!-- Section Header -->
    <div class="text-center lg:text-left mb-12 lg:mb-20" data-aos="fade-up">
      <p class="font-heebo font-semibold text-text-small text-neutral-darkest mb-2">
        Construcción
      </p>
      <h2 class="font-urbanist font-medium text-heading-3 lg:text-heading-2 text-neutral-darkest mb-4">
        Así es como funciona nuestro servicio de construcción
      </h2>
      <p class="font-heebo font-normal text-text-regular lg:text-text-large text-neutral-darkest">
        Transformamos tus ideas en proyectos reales y duraderos.
      </p>
    </div>
    
    <!-- Process Steps - Mobile: Vertical Cards, Desktop: Tabbed Interface -->
    <div data-aos="fade-up" data-aos-delay="200">
      <!-- Mobile Version: Vertical Stack -->
      <div class="lg:hidden space-y-6">
        <!-- Step 1 -->
        <div class="border-2 border-neutral-darkest rounded-large overflow-hidden">
          <div class="bg-neutral-lighter p-6 border-b-2 border-neutral-darkest">
            <div class="flex items-center gap-4">
              <span class="font-urbanist font-medium text-heading-5 text-neutral-darkest">01</span>
              <h3 class="font-urbanist font-medium text-heading-6 text-neutral-darkest">
                Planificación detallada
              </h3>
            </div>
          </div>
          <div class="p-6">
            <p class="font-heebo font-normal text-text-regular text-neutral-darkest mb-4">
              Comenzamos con una planificación meticulosa para entender tus necesidades. Esto asegura que cada detalle sea considerado desde el inicio.
            </p>
            <img 
              src={processImage} 
              alt="Planificación detallada" 
              class="w-full h-48 object-cover rounded-lg"
            />
          </div>
        </div>
        
        <!-- Step 2 -->
        <div class="border-2 border-neutral-darkest rounded-large overflow-hidden">
          <div class="bg-neutral-lighter p-6 border-b-2 border-neutral-darkest">
            <div class="flex items-center gap-4">
              <span class="font-urbanist font-medium text-heading-5 text-neutral-darkest">02</span>
              <h3 class="font-urbanist font-medium text-heading-6 text-neutral-darkest">
                Diseño personalizado
              </h3>
            </div>
          </div>
          <div class="p-6">
            <p class="font-heebo font-normal text-text-regular text-neutral-darkest mb-4">
              Creamos diseños personalizados que capturan perfectamente tu visión y necesidades específicas, utilizando las últimas tecnologías de diseño.
            </p>
            <img 
              src={processImage} 
              alt="Diseño personalizado" 
              class="w-full h-48 object-cover rounded-lg"
            />
          </div>
        </div>
        
        <!-- Step 3 -->
        <div class="border-2 border-neutral-darkest rounded-large overflow-hidden">
          <div class="bg-neutral-lighter p-6 border-b-2 border-neutral-darkest">
            <div class="flex items-center gap-4">
              <span class="font-urbanist font-medium text-heading-5 text-neutral-darkest">03</span>
              <h3 class="font-urbanist font-medium text-heading-6 text-neutral-darkest">
                Construcción de calidad
              </h3>
            </div>
          </div>
          <div class="p-6">
            <p class="font-heebo font-normal text-text-regular text-neutral-darkest mb-4">
              Utilizamos materiales de primera calidad y técnicas de construcción avanzadas, garantizando durabilidad y excelencia en cada proyecto.
            </p>
            <img 
              src={processImage} 
              alt="Construcción de calidad" 
              class="w-full h-48 object-cover rounded-lg"
            />
          </div>
        </div>
        
        <!-- Step 4 -->
        <div class="border-2 border-neutral-darkest rounded-large overflow-hidden">
          <div class="bg-neutral-lighter p-6 border-b-2 border-neutral-darkest">
            <div class="flex items-center gap-4">
              <span class="font-urbanist font-medium text-heading-5 text-neutral-darkest">04</span>
              <h3 class="font-urbanist font-medium text-heading-6 text-neutral-darkest">
                Entrega puntual
              </h3>
            </div>
          </div>
          <div class="p-6">
            <p class="font-heebo font-normal text-text-regular text-neutral-darkest mb-4">
              Cumplimos con los plazos establecidos sin comprometer la calidad. Tu proyecto será entregado a tiempo y listo para ser utilizado.
            </p>
            <img 
              src={processImage} 
              alt="Entrega puntual" 
              class="w-full h-48 object-cover rounded-lg"
            />
          </div>
        </div>
      </div>

      <!-- Desktop Version: Tabbed Interface -->
      <div class="hidden lg:block border-2 border-neutral-darkest rounded-large overflow-hidden">
        <div class="flex">
          <!-- Navigation Tabs -->
          <div class="w-auto">
            <div class="flex flex-col border-r-2 border-neutral-darkest">
              <!-- Step 1 - Active -->
              <button 
                class="p-6 text-left w-full hover:bg-neutral-lighter/50 border-b-4 border-neutral-darkest transition-all duration-300 group"
                id="step-1"
                onclick="showStep(1)"
              >
                <span class="font-urbanist font-medium text-[32px] text-neutral-darkest group-hover:text-forest-green transition-colors">
                  01
                </span>
                <h3 class="font-urbanist font-medium text-[32px] text-neutral-darkest group-hover:text-forest-green mt-4 [writing-mode:vertical-rl] transform rotate-180 transition-colors">
                  Planificación detallada
                </h3>
              </button>
              
              <!-- Step 2 -->
              <button 
                class="p-6 text-left w-full hover:bg-neutral-lighter/50 transition-all duration-300 group"
                id="step-2"
                onclick="showStep(2)"
              >
                <span class="font-urbanist font-medium text-[32px] text-neutral-darkest group-hover:text-forest-green transition-colors">
                  02
                </span>
                <h3 class="font-urbanist font-medium text-[32px] text-neutral-darkest group-hover:text-forest-green mt-4 [writing-mode:vertical-rl] transform rotate-180 transition-colors">
                  Diseño personalizado
                </h3>
              </button>
              
              <!-- Step 3 -->
              <button 
                class="p-6 text-left w-full hover:bg-neutral-lighter/50 transition-all duration-300 group"
                id="step-3"
                onclick="showStep(3)"
              >
                <span class="font-urbanist font-medium text-[32px] text-neutral-darkest group-hover:text-forest-green transition-colors">
                  03
                </span>
                <h3 class="font-urbanist font-medium text-[32px] text-neutral-darkest group-hover:text-forest-green mt-4 [writing-mode:vertical-rl] transform rotate-180 transition-colors">
                  Construcción de calidad
                </h3>
              </button>
              
              <!-- Step 4 -->
              <button 
                class="p-6 text-left w-full hover:bg-neutral-lighter/50 transition-all duration-300 group"
                id="step-4"
                onclick="showStep(4)"
              >
                <span class="font-urbanist font-medium text-[32px] text-neutral-darkest group-hover:text-forest-green transition-colors">
                  04
                </span>
                <h3 class="font-urbanist font-medium text-[32px] text-neutral-darkest group-hover:text-forest-green mt-4 [writing-mode:vertical-rl] transform rotate-180 transition-colors">
                  Entrega puntual
                </h3>
              </button>
            </div>
          </div>
          
          <!-- Content Area -->
          <div class="p-16 flex-1">
            <!-- Step 1 Content -->
            <div id="content-1" class="step-content">
              <h3 class="font-urbanist font-medium text-heading-2 text-neutral-darkest">
                Nuestro primer paso esencial
              </h3>
              <p class="font-heebo font-normal text-text-medium text-neutral-darkest mt-6">
                Comenzamos con una planificación meticulosa para entender tus necesidades. Esto asegura que cada detalle sea considerado desde el inicio.
              </p>
              <img 
                src={processImage} 
                alt="Planificación detallada" 
                class="w-full h-[400px] object-cover rounded-[32px] mt-12 shadow-lg"
              />
            </div>
            
            <!-- Step 2 Content -->
            <div id="content-2" class="step-content hidden">
              <h3 class="font-urbanist font-medium text-heading-2 text-neutral-darkest">
                Diseño que refleja tu visión
              </h3>
              <p class="font-heebo font-normal text-text-medium text-neutral-darkest mt-6">
                Creamos diseños personalizados que capturan perfectamente tu visión y necesidades específicas, utilizando las últimas tecnologías de diseño.
              </p>
              <img 
                src={processImage} 
                alt="Diseño personalizado" 
                class="w-full h-[400px] object-cover rounded-[32px] mt-12 shadow-lg"
              />
            </div>
            
            <!-- Step 3 Content -->
            <div id="content-3" class="step-content hidden">
              <h3 class="font-urbanist font-medium text-heading-2 text-neutral-darkest">
                Construcción con los más altos estándares
              </h3>
              <p class="font-heebo font-normal text-text-medium text-neutral-darkest mt-6">
                Utilizamos materiales de primera calidad y técnicas de construcción avanzadas, garantizando durabilidad y excelencia en cada proyecto.
              </p>
              <img 
                src={processImage} 
                alt="Construcción de calidad" 
                class="w-full h-[400px] object-cover rounded-[32px] mt-12 shadow-lg"
              />
            </div>
            
            <!-- Step 4 Content -->
            <div id="content-4" class="step-content hidden">
              <h3 class="font-urbanist font-medium text-heading-2 text-neutral-darkest">
                Entrega sin retrasos
              </h3>
              <p class="font-heebo font-normal text-text-medium text-neutral-darkest mt-6">
                Cumplimos con los plazos establecidos sin comprometer la calidad. Tu proyecto será entregado a tiempo y listo para ser utilizado.
              </p>
              <img 
                src={processImage} 
                alt="Entrega puntual" 
                class="w-full h-[400px] object-cover rounded-[32px] mt-12 shadow-lg"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  function showStep(stepNumber: number): void {
    // Hide all content
    document.querySelectorAll('.step-content').forEach(content => {
      content.classList.add('hidden');
    });
    
    // Remove active state from all buttons
    document.querySelectorAll('button[id^="step-"]').forEach(button => {
      button.classList.remove('border-b-4', 'border-neutral-darkest');
    });
    
    // Show selected content
    const contentElement = document.getElementById(`content-${stepNumber}`);
    if (contentElement) {
      contentElement.classList.remove('hidden');
    }
    
    // Add active state to selected button
    const stepElement = document.getElementById(`step-${stepNumber}`);
    if (stepElement) {
      stepElement.classList.add('border-b-4', 'border-neutral-darkest');
    }
  }
</script>
