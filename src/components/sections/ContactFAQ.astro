---
// ContactFAQ.astro - FAQ section with accordion layout
import { Icon } from "astro-icon/components";
import SectionLayout from '../ui/SectionLayout.astro';
import Button from '../ui/Button.astro';

interface FAQItem {
  question: string;
  answer: string;
}

const faqItems: FAQItem[] = [
  {
    question: "¿Cuánto tiempo tardan?",
    answer: "El tiempo de respuesta depende del tipo de proyecto. Generalmente, nuestros plazos son de 4 a 6 semanas. Sin embargo, siempre te mantendremos informado sobre el progreso."
  },
  {
    question: "¿Qué servicios ofrecen?",
    answer: "Ofrecemos una variedad de servicios, incluyendo construcción residencial, remodelaciones y diseño arquitectónico. Cada proyecto es personalizado para satisfacer tus necesidades. Contáctanos para más detalles."
  },
  {
    question: "¿Cómo puedo contratar?",
    answer: "Para contratar nuestros servicios, simplemente completa el formulario de contacto en nuestra página. Uno de nuestros representantes se comunicará contigo para discutir los detalles. Estamos aquí para ayudarte en cada paso."
  },
  {
    question: "¿Tienen garantía?",
    answer: "Sí, ofrecemos garantía en todos nuestros proyectos. Esto asegura que estés satisfecho con el trabajo realizado. Si tienes algún problema, no dudes en contactarnos."
  },
  {
    question: "¿Puedo ver proyectos anteriores?",
    answer: "Por supuesto, puedes visitar nuestra sección de proyectos en el sitio web. Allí encontrarás ejemplos de nuestro trabajo anterior. Te invitamos a explorar y ver la calidad de nuestras construcciones."
  }
];
---

<SectionLayout background="gray">
  <div class="content-stretch flex flex-col lg:flex-row gap-12 lg:gap-20 items-start justify-start relative w-full">
    <!-- Left Side: Title and Description -->
    <div class="content-stretch flex flex-col gap-6 lg:gap-8 items-start justify-start relative w-full lg:w-[500px]">
      <div class="content-stretch flex flex-col gap-5 lg:gap-6 items-start justify-start leading-[0] relative text-[#0c0801] w-full">
        <div class="font-['Urbanist:Medium',_sans-serif] font-medium relative text-[44px] lg:text-[60px] tracking-[0.44px] lg:tracking-[0.6px] w-full">
          <p class="leading-[1.2]">Preguntas</p>
        </div>
        <div class="font-['Heebo:Regular',_sans-serif] font-normal relative text-[14px] lg:text-[20px] w-full">
          <p class="leading-[1.6]">Aquí encontrarás respuestas a las preguntas más comunes sobre nuestros servicios y procesos.</p>
        </div>
      </div>
      <div class="content-stretch flex gap-6 items-center justify-start relative">
        <Button href="#form" variant="secondary">Contacto</Button>
      </div>
    </div>
      
      <!-- Right Side: FAQ Accordion -->
      <div class="basis-0 content-stretch flex flex-col grow items-start justify-start min-h-px min-w-px relative">
        <div aria-hidden="true" class="absolute border-[#0c0801] border-[0px_0px_2px] border-solid inset-0 pointer-events-none" />
        
        {faqItems.map((item, index) => (
          <div class="content-stretch flex flex-col items-start justify-start relative w-full">
            <!-- Question Header -->
            <div class="relative w-full">
              <div class="box-border content-stretch flex gap-4 lg:gap-6 items-center justify-start overflow-clip px-0 py-4 lg:py-5 relative w-full">
                <div class="basis-0 font-['Heebo:Bold',_sans-serif] font-bold grow leading-[0] min-h-px min-w-px relative text-[#0c0801] text-[16px] lg:text-[20px]">
                  <p class="leading-[1.6]">{item.question}</p>
                </div>
                <div class="overflow-clip relative size-6 lg:size-8">
                  <Icon name="ph:caret-up" class="w-6 h-6 lg:w-8 lg:h-8 text-[#0c0801]" />
                </div>
              </div>
              <div aria-hidden="true" class="absolute border-[#0c0801] border-[2px_0px_0px] border-solid inset-0 pointer-events-none" />
            </div>
            
            <!-- Answer Content -->
            <div class="box-border content-stretch flex gap-4 items-start justify-start pb-5 lg:pb-6 pt-0 px-0 relative w-full">
              <div class="basis-0 font-['Heebo:Regular',_sans-serif] font-normal grow leading-[0] min-h-px min-w-px relative text-[#0c0801] text-[14px] lg:text-[18px]">
                <p class="leading-[1.6]">{item.answer}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>
  </div>
</SectionLayout>

<script is:inline>
  // Add FAQ accordion functionality
  document.addEventListener('DOMContentLoaded', function() {
    // Use a more specific approach to find FAQ items
    const faqItems = document.querySelectorAll('.content-stretch.flex.flex-col.items-start.justify-start.relative.w-full');
    
    faqItems.forEach(function(item, index) {
      const header = item.querySelector('.box-border.content-stretch.flex.gap-6.items-center.justify-start.overflow-clip');
      const content = item.querySelector('.box-border.content-stretch.flex.gap-4.items-start.justify-start');
      const iconContainer = item.querySelector('.overflow-clip.relative.size-8');
      
      if (header && content && iconContainer) {
        const iconEl = iconContainer.firstElementChild;
        
        header.style.cursor = 'pointer';
        content.style.display = 'flex'; // Show all by default as per design
        
        // Add smooth transitions
        content.style.transition = 'all 0.3s ease';
        if (iconEl) {
          iconEl.style.transition = 'transform 0.3s ease';
        }
        
        header.addEventListener('click', function() {
          const isOpen = content.style.display !== 'none';
          
          if (isOpen) {
            content.style.display = 'none';
            if (iconEl) {
              iconEl.style.transform = 'rotate(180deg)';
            }
          } else {
            content.style.display = 'flex';
            if (iconEl) {
              iconEl.style.transform = 'rotate(0deg)';
            }
          }
        });
      }
    });
  });
</script>